{"componentChunkName":"component---src-templates-doc-js","path":"/data-exploration/","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"9e748681-c83c-5a70-8db4-6920594493fd","excerpt":"Pre-requisites This tutorial requires that you followed the basic tutorial. Make sure you enabled the following components in Open Data Hub CR: spark-operator…","html":"<h2>Pre-requisites</h2>\n<p>This tutorial requires that you followed the <a href=\"%7B%7Bsite.baseurl%7D%7D/docs/getting-started/basic-tutorial\">basic tutorial</a>. Make sure you enabled the following components in Open Data Hub CR:</p>\n<ul>\n<li>spark-operator</li>\n<li>data-catalog</li>\n</ul>\n<p>All screenshots and instructions are from OpenShift 4.2.</p>\n<h2>Exploring Data Catalog</h2>\n<p>The Data Catalog is a set of components with which you can\nread data stored in Data Lakes, create tables and query them in a SQL-like style. You can find\nbelow a picture of the simplified architecture of Data Catalog:</p>\n<p><img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/architecture.png\" alt=\"Data Catalog Architecture\" title=\"Data Catalog Architecture\"></p>\n<p>These are the components that are part of Data Catalog:</p>\n<ul>\n<li>Hive Metastore, responsible for maintaining the table metadata created by the user to query the data stored in Ceph/S3</li>\n<li>Spark SQL Thrift server to enable an endpoint where clients can connect using an ODBC/JDBC connection</li>\n<li>Cloudera Hue as a Data Exploration tool to explore the Data Lake, create tables and query them. You can\nalso create dashboards using the tables managed by Hive Metastore</li>\n</ul>\n<h2>Using Data Catalog</h2>\n<ol>\n<li>Find the route to Hue. Within your Open Data Hub Project click on Networking -> Routes\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/routes.png\" alt=\"OpenShift routes\" title=\"OpenShift routes\"></li>\n<li>For the route named hue, click on the location to bring up Hue (typically <code class=\"language-text\">http://hue-project.apps.your-cluster.your-domain.com</code>).</li>\n<li>It will open the first-time login page where you can create the superuser for Hue.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/hue-user-creation.png\" alt=\"Hue user creation\" title=\"Hue user creation\"></li>\n<li>As the first login, Hue will show a tutorial about the interface. You can skip the tutorial by closing the window.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/tutorial.png\" alt=\"Hue tutorial\" title=\"Hue tutorial\"></li>\n<li>The Hue editor will appear in a blank textarea.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/editor.png\" alt=\"Hue editor\" title=\"Hue editor\"></li>\n</ol>\n<p>Now we can create a table from a file inside the Data Lake.</p>\n<h2>Creating and querying tables</h2>\n<ol>\n<li>Let’s create first a database with the following command (You can run the query by either clicking on the play button in the left or type Ctrl+Enter):</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CREATE DATABASE opendatahub;</code></pre></div>\n<ol start=\"2\">\n<li>In the explorer, click on the refresh button. The new database will appear:\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/new-database.png\" alt=\"New database created\" title=\"New database created\">{:class=“img-auto”}</li>\n<li>Now let’s select the database with the command:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">USE opendatahub;</code></pre></div>\n<ol start=\"4\">\n<li>We will create a table from the <code class=\"language-text\">sample_data.csv</code> file used in the <code class=\"language-text\">Basic Tutorial</code> section:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CREATE EXTERNAL TABLE opendatahub.sample(\n    timestamp TIMESTAMP,\n    name STRING,\n    field STRING,\n    primary_audience STRING,\n    key_people STRING,\n    outcome STRING,\n    full_notes STRING,\n    email STRING,\n    sample_date DATE,\n    notes STRING,\n    lowlights STRING,\n    learnings STRING,\n    trip_region STRING,\n    number_of_days INT,\n    estimated_cost FLOAT,\n    product_mix STRING\n)\nROW FORMAT SERDE &#39;org.apache.hadoop.hive.serde2.OpenCSVSerde&#39;\nWITH SERDEPROPERTIES (\n&quot;separatorChar&quot; = &quot;,&quot;,\n&quot;quoteChar&quot; = &quot;\\&quot;&quot;,\n&quot;escapeChar&quot; = &quot;\\\\&quot;\n)\nTBLPROPERTIES(&quot;skip.header.line.count&quot;=&quot;1&quot;)\nLOCATION &#39;s3a://&lt;csv-file-location&gt;&#39;</code></pre></div>\n<p><strong>NOTE:</strong> The <code class=\"language-text\">LOCATION</code> statement needs a path to the directory where the file is stored, not the file path.</p>\n<ol start=\"5\">\n<li>You will see the result of table creation.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/table-creation.png\" alt=\"New table created\" title=\"New table created\"></li>\n<li>We can now query the data.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">select * from opendatahub.sample limit 10;</code></pre></div>\n<ol start=\"7\">\n<li>Check the query results in Hue.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/query-results.png\" alt=\"Query results\" title=\"Query results\"></li>\n</ol>\n<p>{% include next-link.html label=“Kubeflow” url=“/docs/kubeflow.html” %}</p>","frontmatter":{"title":"Data Exploration","idx":2,"description":"Data Exploration"}}},"pageContext":{"slug":"/data-exploration/","previous":null,"next":{"fields":{"slug":"/basic-tutorial/"},"frontmatter":{"title":"Basic Tutorial"}}}},"staticQueryHashes":["3000541721"]}